## 신호의 전송과 충돌

------

### 1계층의 역할과 개요

케이블이 연결되어 있는 기기에 신호를 전달하는 것
신호가 지나다니는 통로가 통신매체

__1계층이 정하는것__

- 보내지는 데이터인 신호
  - 신호의 종류
  - 신호의 형태
- 컴퓨터와 케이블을 연결하는 인터페이스
  - 비트를 신호로 변환하는 방법
  - 케이블의 잭과 인터페이스 쪽의 삽입구의 형태
- 신호가 지나가는 케이블
  - 재질 / 구조
  - 전기신호 - 동선 / 광신호 - 광파이버

__1계층의 역할__

- 신호로서 데이터를 전달

__UTP(Unshielded Twist Pair cable)__

- 두 개가 한 쌍인 동선 4쌍으로 이루어짐 (LAN선)
- LAN - NIC(Network Interface Card) 를 통해
- WAN - DCE(Data Circuit terminating Equipment)

------



### 신호와 충돌

인터페이스는 비트와 신호를 서로 변환
1초간 신호의 횟수 X 1신호에서의 비트수 = 통신속도(bps)

신호에 발생하는 문제

- 케이블이 길면 신호가 약해짐
- 노이즈, 간섭
- 충돌 - 신호가 보내지는 중에 다른 신호를 보내는 경우
  - 해결법 - 신호가 보내지는 타이밍을 엇갈리게 / 다른 길로 지나가게 바꿈

------



### 허브

허브로 연결 되어있으면 같은 케이블에 연결된 취금

__허브의 기능__

- 신호 증폭 / 재생
- 복수의 기기를 연결하여 네트워크를 구성
- 수신한 포트 이외에 나머지 모든 포트에 신호를 보냄 (flooding)

허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있다
다른 허브로 연결되어 있는 경우라도 연속 접속이면 충돌 발생

------



### 2계층의 역할과 개요

신호의 송신 전이나 수신 후에 바르게 데이터를 송수신하는 순서가 필요

신호가 닿는 범위(세그먼트 범위)에서의 데이터 전송에 관한 규정

1계층에 따라서 2계층의 규격이 달라짐 (LAN과 WAN)

- LAN - 이더넷
- Framing (프레임화)
  - 프레임 포맷을 비트열에 적용시켜 비트에 의미를 부여
  - 프리엠블 8비트 (송신측의 타이밍을 맞추기 위함), 어드레스 16비트

------



### 2계층 주소와 이더넷

데이터의 전송방법

- 유니캐스트 - Uni-cast
  - 1대1 데이터 통신
  - 유일한 주소

- 브로드캐스트 - Broadcast
  - 1대 전체 : 모두에게 메시지를 보냄

- 멀티캐스트 - Multicast
  - 1대 다수 : 복수에게 메시지를 보냄


__MAC (Media Access Control Address)__ 

각 기기는 적어도 유니캐스트 주소를 한 개 가지고 있다
인터페이스에 지정된 고정 주소
48비트 값 / 4비트 마다 16진수로 표기
밴더 코드(24비트) + 밴더 할당 코드(24비트)

------



### 이더넷

FCS(Frame Check Sequence) : 순회부호 방식

- 신호가 전송되는 동안 문제가 생겨 정확하게 읽을 수 없게 되거나 0또는 1을 잘못 읽는 경우의 에러를 체크하기 위함
- 에러가 있는 프레임은 파기 / 송신측에서는 알 수 없음

멀티액세스 네트워크에서는 수신한 프레임에서는 자신에게 온 MAC주소가 아니면 모두 파기

__CSMA/CM (Carrier Sense Multiple Access / Collision Detection)__

- 엑세스 제어
- JAM 신호 - 다른 기기에 충돌을 알리고, 도중에 수신한 프레임을 파기
- 충돌 카운터 16이상이면 충돌 횟수가 많아 송신 중지
- CS - 신호감지 - 누군가가 송신 중이라면 송신하지 않음
- MA - 다중 엑세스 - 아무도 송신하지 않으면 송신 가능
- CD - 충돌검사 - 손신 후에 충돌이 일어나면 다시 재수행

------



### 스위치

충돌이 많아지면 효율이 매우 나빠짐 / 충돌은 허브에서 발생

신호가 지나는 길을 나누기 위해 사용함 / 허브 대신에 사용

수신한 프레임을 따로따로 보낼 수 있도록 처리해서 충돌을 막는 것

__MAC 주소 필터링과 버퍼링__

수신처가 다른 프레임이 동시에 스위치에 도달해도 충돌 발생하지 않게 함

- 필터링
  - 학습 : 수신한 프레임의 송신처 MAC주소를 기록 / 포트에 연결되어 있는 컴퓨터의 MAC 주소를 기억 / 이 대응표를 '어드레스 테이블'이라 함
  - 스위칭 : 프레임의 수신처 MAC 주소를 보고 그 MAC 주소가 있는 포트만 프레임을 송신

------



### 전이중 이더넷

버퍼링 - Buffer를 이용해 처리

충돌할 것 같은 프레임을 버퍼에 일시적으로 저장

버퍼의 용량을 벗어난 요청이 올 경우 백 프레셔(Back Pressure) / IEEE802.3x

- 전이중 이더넷이면 IEEE802.3x
- 아니면 백 프레셔

충돌 도메인이 스위치에 의해 분할

반이중통신 - 누군가 송신중이면 송신 불가능 / 송신 중이면 수신 불가능 (CSMA/CD)

전이중통신 - 송신/수신 동시에 가능


